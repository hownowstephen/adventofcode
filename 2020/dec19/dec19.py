rawRules = """
77: 30 112 | 20 13
121: 43 20 | 123 30
42: 57 30 | 101 20
30: "a"
50: 65 20 | 134 30
37: 89 20 | 43 30
106: 16 30 | 54 20
17: 30 84 | 20 35
129: 89 20 | 96 30
123: 30 30 | 20 95
20: "b"
115: 20 70 | 30 93
112: 30 90 | 20 123
4: 20 55 | 30 5
72: 20 90 | 30 123
51: 30 20 | 20 95
24: 131 30 | 7 20
94: 121 20 | 15 30
117: 133 30 | 102 20
92: 28 20 | 43 30
70: 87 30 | 96 20
88: 109 20 | 36 30
35: 20 36 | 30 61
96: 30 95 | 20 20
47: 96 20 | 66 30
6: 20 55 | 30 123
130: 30 29 | 20 88
68: 5 20 | 89 30
66: 95 95
75: 96 30 | 55 20
3: 20 90 | 30 5
7: 20 53 | 30 123
86: 30 5 | 20 53
105: 20 87
46: 134 20 | 87 30
102: 30 111 | 20 103
93: 87 20 | 87 30
79: 116 20 | 71 30
8: 42
33: 5 20 | 87 30
107: 96 20 | 123 30
90: 20 30
110: 20 59 | 30 32
16: 30 68 | 20 39
52: 4 20 | 38 30
71: 96 30 | 51 20
38: 96 20 | 90 30
28: 20 30 | 30 30
27: 30 64 | 20 24
91: 30 27 | 20 113
1: 20 90 | 30 134
54: 105 20 | 18 30
0: 8 11
73: 65 20 | 55 30
132: 30 17 | 20 19
41: 20 51 | 30 22
45: 22 30 | 53 20
14: 124 20 | 73 30
22: 30 30
23: 87 30 | 55 20
10: 30 89 | 20 134
120: 56 30 | 9 20
11: 42 31
109: 95 134
127: 30 53 | 20 123
61: 20 53 | 30 90
103: 127 30 | 23 20
116: 90 20 | 87 30
134: 20 20 | 30 20
114: 20 63 | 30 41
64: 20 118 | 30 25
12: 30 48 | 20 3
111: 20 23 | 30 72
60: 79 30 | 120 20
59: 20 28 | 30 87
65: 20 30 | 20 20
44: 89 30 | 28 20
18: 65 20 | 43 30
32: 95 123
83: 30 66 | 20 22
63: 20 123 | 30 55
48: 30 134 | 20 43
99: 20 12 | 30 125
43: 20 20
133: 20 100 | 30 110
80: 20 50 | 30 44
125: 20 98 | 30 86
135: 128 30 | 130 20
131: 20 55 | 30 134
122: 97 30 | 60 20
25: 30 43 | 20 51
95: 20 | 30
55: 30 95 | 20 30
13: 43 20 | 43 30
21: 20 76 | 30 80
98: 89 30 | 65 20
81: 106 30 | 85 20
53: 30 30 | 20 20
78: 45 30 | 37 20
89: 20 30 | 30 20
9: 96 30 | 43 20
31: 2 20 | 82 30
56: 5 20 | 96 30
76: 1 20 | 23 30
62: 92 30 | 10 20
58: 30 22 | 20 43
85: 77 20 | 67 30
26: 30 58 | 20 6
101: 30 81 | 20 91
29: 83 30 | 47 20
126: 20 53 | 30 55
2: 122 20 | 135 30
15: 5 30 | 51 20
34: 20 37 | 30 116
82: 30 104 | 20 132
19: 40 20 | 62 30
108: 21 20 | 119 30
36: 30 22 | 20 87
104: 69 30 | 99 20
100: 20 7 | 30 61
39: 89 20
87: 30 20
113: 52 30 | 34 20
5: 30 30 | 30 20
40: 4 30 | 107 20
97: 20 26 | 30 78
67: 30 131 | 20 126
118: 20 134 | 30 66
124: 96 30 | 22 20
128: 30 114 | 20 14
119: 30 49 | 20 74
84: 129 30 | 33 20
74: 30 6 | 20 46
49: 30 38 | 20 75
57: 117 30 | 108 20
69: 20 94 | 30 115
"""

# rawRules = """
# 0: 4 1 5
# 1: 2 3 | 3 2
# 2: 4 4 | 5 5
# 3: 4 5 | 5 4
# 4: "a"
# 5: "b"
# """

rules = {}
for line in rawRules.split("\n"):
    if line.strip() == "":
        continue
    x, y = line.split(":")
    if '"' in y:
        rules[int(x)] = y.strip(' "')
    else:
        rules[int(x)] = [[int(a.strip()) for a in l.strip().split(" ")] for l in y.split("|")]


def all_match(s, idx, rule):
    for sub in rule:
        matched, i = match(s, idx, sub)
        if not matched:
            return (False, 0)
        idx = i
    return (True, idx)

def any_match(s, idx, rule):
    for sub in rule:
        matched, i = match(s, idx, sub)
        if matched:
            return (True, i)
    return (False, 0)

def match(s, idx, rule):
    # print idx, rule
    if type(rule) is int:
        return match(s, idx, rules[rule])
    elif type(rule) is str:
        return (s[idx] == rule, idx+1)
    elif type(rule[0]) is int:
        return all_match(s, idx, rule)
    return any_match(s, idx, rule)


# for s in ["ababbb", "bababa", "abbbab", "aaabbb", "aaaabbb"]:
#     matched, i =  match(s, 0, 0)
#     print s, i, matched and i == len(s)
#     # break

count = total = 0
with open("input.txt") as f:
    for line in f:
        total += 1
        val = line.strip()
        matched, i =  match(val, 0, 0)
        if matched and i == len(val):
            count += 1

print count, total